# Implementation Plan: [FEATURE]

**Branch**: `003-update-mcp-sdk-v1` | **Date**: 2026-02-26 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/003-update-mcp-sdk-v1/spec.md`

**Note**: This plan is generated by `/speckit.plan` for the MCP SDK v1.0.0 update feature.

## Summary

Update all projects and documentation in the workshop to use ModelContextProtocol SDK v1.0.0 (from v0.9.0-preview.1), proactively update all Microsoft.Extensions.* dependencies, resolve any breaking changes (notably RunSessionHandler experimental annotation MCPEXP002), and ensure all code, tests, and documentation compile and function as expected. The codebase uses custom JSON-RPC handling for MCP servers, so the main impact is on package references, transitive dependencies, and Exercise 5 documentation (which contains SDK client code samples). All changes must comply with MCP-first, test-first, and Azure/C#-only principles.

## Technical Context

**Language/Version**: C# 12, .NET 10.0
**Primary Dependencies**: ModelContextProtocol v1.0.0, Microsoft.Extensions.* (latest stable), custom JSON-RPC protocol types in McpWorkshop.Shared
**Storage**: N/A (in-memory or file-based sample data only)
**Testing**: dotnet test, PowerShell verification scripts
**Target Platform**: Windows, Linux, macOS (dev); Azure App Service/Container Apps (optional deployment)
**Project Type**: Multi-project .NET solution (MCP servers, shared lib, tests)
**Performance Goals**: N/A (workshop/demo only)
**Constraints**: Must not introduce new warnings/errors; must not break workshop exercises or documentation; must comply with MCP-first and Azure/C#-only principles
**Scale/Scope**: 4 main projects, 1 test project, 5 workshop exercises, 2 documentation files with SDK code samples

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

**Gates:**

- MCP-first: All server and tool capabilities must remain exposed via MCP endpoints (custom JSON-RPC is compliant as long as protocol is preserved).
- Text/JSON interfaces: All request/response flows must remain text/JSON-based; no GUI or binary protocols.
- Test-first & reproducibility: All changes must be validated by running `dotnet test` and PowerShell verification scripts; no manual-only validation.
- Integration: No new isolated tools; all changes must preserve or improve integration scenarios (e.g., Exercise 5 client code must still work end-to-end).
- Simplicity & observability: No unnecessary complexity; logging and error handling must remain clear in all servers.
- Azure/C#-only: No introduction of non-Microsoft or non-Azure tech; all code remains C#/.NET and Azure-compatible.

## Project Structure

ios/ or android/

### Documentation (this feature)

```text
specs/003-update-mcp-sdk-v1/
├── plan.md              # This file (/speckit.plan command output)
├── research.md          # Phase 0 output (/speckit.plan command)
├── data-model.md        # Phase 1 output (/speckit.plan command)
├── quickstart.md        # Phase 1 output (/speckit.plan command)
├── contracts/           # Phase 1 output (/speckit.plan command)
└── tasks.md             # Phase 2 output (/speckit.tasks command - NOT created by /speckit.plan)
```

### Source Code (repository root)

```text
src/
├── McpWorkshop.Shared/
│   ├── McpWorkshop.Shared.csproj
│   └── Mcp/                  # Custom protocol types
├── McpWorkshop.Servers/
│   ├── SqlMcpServer/
│   │   └── SqlMcpServer.csproj
│   ├── RestApiMcpServer/
│   │   └── RestApiMcpServer.csproj
│   ├── CosmosMcpServer/
│   │   └── CosmosMcpServer.csproj
│   └── Exercise5Agent/       # Workshop stub, no source files

tests/
└── McpWorkshop.Tests/
    └── McpWorkshop.Tests.csproj


└── modules/
    ├── 09b-ejercicio-5-agente-maf.md
    └── 09a-ejercicio-5-instructor.md
```

**Structure Decision**: This feature applies to a multi-project .NET solution with the following layout:

- `src/McpWorkshop.Shared/` (shared code, protocol types)
- `src/McpWorkshop.Servers/SqlMcpServer/`, `RestApiMcpServer/`, `CosmosMcpServer/` (MCP servers)
- `tests/McpWorkshop.Tests/` (unit/integration tests)
- `docs/modules/09b-ejercicio-5-agente-maf.md`, `09a-ejercicio-5-instructor.md` (workshop documentation with SDK code samples)
All changes are scoped to these directories.

## Complexity Tracking

No constitution violations. No complexity tracking required.
